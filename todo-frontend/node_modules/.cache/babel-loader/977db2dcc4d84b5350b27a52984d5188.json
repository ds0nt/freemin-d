{"ast":null,"code":"var _jsxFileName = \"/Users/jaquelinecoelho/Desktop/good/habits-frontend/src/habits/HabitCardList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport UserContext from \"../auth/UserContext\";\nimport HabitCard from \"./HabitCard\";\nimport todoApi from \"../api/api\"; // Show list of habit cards.\n//  HabitList -> HabitCardList -> HabitCard\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction HabitCardList() {\n  _s();\n\n  const {\n    currentUser,\n    setCurrentUser\n  } = useContext(UserContext);\n  const [habits, setHabits] = useState(currentUser.habits);\n  const [checked, setChecked] = useState(false);\n  console.debug(\"HabitCardList\", \"currentUser=\", currentUser, \"habits=\", currentUser.habits, \"checked=\", checked); // remove a habit\n\n  async function deleteHabitById(id) {\n    try {\n      await GoodHabitsApi.removeHabit(id, currentUser.username);\n      currentUser.habits = currentUser.habits.filter(habit => +habit.id !== +id);\n      setCurrentUser(currentUser);\n      setHabits(currentUser.habits);\n      return {\n        success: true\n      };\n    } catch (errors) {\n      console.error(\"habit deletion failed\", errors);\n      return {\n        success: false,\n        errors\n      };\n    }\n  } // update a habit\n  // async function updateHabitById(id, data) {\n  //     try {\n  //         let res = await GoodHabitsApi.updateHabit(id, currentUser.username, data);\n  //         console.log(\"res in updateHabitById func\", res);\n  //         let updatedHabitId = currentUser.habits.findIndex(habit => +habit.id === +id);\n  //         currentUser.habits[updatedHabitId] = res;\n  //         setCurrentUser(currentUser);\n  //         setChecked(!checked);\n  //         return { success: true };\n  //     } catch (errors) {\n  //         console.error(\"habit check failed\", errors);\n  //         return { success: false, errors };\n  //     }\n  //     }\n  // check a habit\n\n\n  async function checkHabitById(id, data) {\n    try {\n      let res = await GoodHabitsApi.checkHabit(id, currentUser.username, data);\n      console.log(\"res in checkHabitById func\", res);\n      let updatedHabitId = currentUser.habits.findIndex(habit => +habit.id === +id);\n      currentUser.habits[updatedHabitId] = res;\n      setCurrentUser(currentUser);\n      setChecked(!checked);\n      return {\n        success: true\n      };\n    } catch (errors) {\n      console.error(\"habit check failed\", errors);\n      return {\n        success: false,\n        errors\n      };\n    }\n  }\n\n  let today = new Date().toISOString().slice(0, 10); //  if a habit has already been checked today it will disable the check button while rendering\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"HabitCardList col-md-8 offset-md-2\",\n    children: habits.map(habit => habit.last_checked.slice(0, 10) === today ? /*#__PURE__*/_jsxDEV(HabitCard, {\n      id: habit.id,\n      username: habit.username,\n      title: habit.title,\n      habit_description: habit.habit_description,\n      streak_target: habit.streak_target,\n      max_streak: habit.max_streak,\n      attempt: habit.attempt,\n      current_counter: habit.current_counter,\n      last_checked: habit.last_checked,\n      deleteHabitById: deleteHabitById,\n      checkHabit: checkHabitById,\n      done: true\n    }, habit.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(HabitCard, {\n      id: habit.id,\n      username: habit.username,\n      title: habit.title,\n      habit_description: habit.habit_description,\n      streak_target: habit.streak_target,\n      max_streak: habit.max_streak,\n      attempt: habit.attempt,\n      current_counter: habit.current_counter,\n      last_checked: habit.last_checked,\n      deleteHabitById: deleteHabitById,\n      checkHabit: checkHabitById,\n      done: false\n    }, habit.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 7\n  }, this);\n}\n\n_s(HabitCardList, \"dGkX+FdPX7FrpI8gYpbL6GtXbjI=\");\n\n_c = HabitCardList;\nexport default HabitCardList;\n\nvar _c;\n\n$RefreshReg$(_c, \"HabitCardList\");","map":{"version":3,"sources":["/Users/jaquelinecoelho/Desktop/good/habits-frontend/src/habits/HabitCardList.js"],"names":["React","useContext","useState","UserContext","HabitCard","todoApi","HabitCardList","currentUser","setCurrentUser","habits","setHabits","checked","setChecked","console","debug","deleteHabitById","id","GoodHabitsApi","removeHabit","username","filter","habit","success","errors","error","checkHabitById","data","res","checkHabit","log","updatedHabitId","findIndex","today","Date","toISOString","slice","map","last_checked","title","habit_description","streak_target","max_streak","attempt","current_counter"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport UserContext from \"../auth/UserContext\";\nimport HabitCard from \"./HabitCard\";\nimport todoApi from \"../api/api\";\n\n// Show list of habit cards.\n//  HabitList -> HabitCardList -> HabitCard\n\nfunction HabitCardList() {\n    const { currentUser, setCurrentUser } = useContext(UserContext);  \n    const [habits, setHabits] = useState(currentUser.habits);\n    const [checked, setChecked] = useState(false);  \n   \n    console.debug(\n        \"HabitCardList\",\n        \"currentUser=\", currentUser,\n        \"habits=\", currentUser.habits,\n        \"checked=\", checked\n    );\n    \n\n    // remove a habit\n    async function deleteHabitById(id) {\n        try {\n            await GoodHabitsApi.removeHabit(id, currentUser.username);\n            currentUser.habits = currentUser.habits.filter(habit => +habit.id !== +id);\n            setCurrentUser(currentUser);\n            setHabits(currentUser.habits);\n            return { success: true };\n\n        } catch (errors) {\n            console.error(\"habit deletion failed\", errors);\n            return { success: false, errors };\n        }\n        }\n    \n    // update a habit\n    // async function updateHabitById(id, data) {\n    //     try {\n    //         let res = await GoodHabitsApi.updateHabit(id, currentUser.username, data);\n    //         console.log(\"res in updateHabitById func\", res);\n    //         let updatedHabitId = currentUser.habits.findIndex(habit => +habit.id === +id);\n    //         currentUser.habits[updatedHabitId] = res;\n    //         setCurrentUser(currentUser);\n    //         setChecked(!checked);\n    //         return { success: true };\n\n    //     } catch (errors) {\n    //         console.error(\"habit check failed\", errors);\n    //         return { success: false, errors };\n    //     }\n    //     }\n\n    // check a habit\n    async function checkHabitById(id, data) {\n        try {\n            let res = await GoodHabitsApi.checkHabit(id, currentUser.username, data);\n            console.log(\"res in checkHabitById func\", res);\n            let updatedHabitId = currentUser.habits.findIndex(habit => +habit.id === +id);\n            currentUser.habits[updatedHabitId] = res;\n            setCurrentUser(currentUser);\n            setChecked(!checked);\n            return { success: true };\n\n        } catch (errors) {\n            console.error(\"habit check failed\", errors);\n            return { success: false, errors };\n        }\n        }\n\n    let today = new Date().toISOString().slice(0, 10);\n    //  if a habit has already been checked today it will disable the check button while rendering\n  return (\n      <div className=\"HabitCardList col-md-8 offset-md-2\">\n        {habits.map(habit =>  (habit.last_checked.slice(0,10)) === today ? (\n            <HabitCard\n                key={habit.id}\n                id={habit.id}\n                username={habit.username}\n                title={habit.title}\n                habit_description={habit.habit_description}\n                streak_target={habit.streak_target}\n                max_streak={habit.max_streak}\n                attempt={habit.attempt}\n                current_counter={habit.current_counter}\n                last_checked={habit.last_checked}\n                deleteHabitById={deleteHabitById}\n                checkHabit={checkHabitById}\n                done={true}\n            />) : \n            (\n            <HabitCard\n                key={habit.id}\n                id={habit.id}\n                username={habit.username}\n                title={habit.title}\n                habit_description={habit.habit_description}\n                streak_target={habit.streak_target}\n                max_streak={habit.max_streak}\n                attempt={habit.attempt}\n                current_counter={habit.current_counter}\n                last_checked={habit.last_checked}\n                deleteHabitById={deleteHabitById}\n                checkHabit={checkHabitById}\n                done={false}\n            />  \n            )\n        )}\n      </div>\n  );\n}\n\nexport default HabitCardList;"]},"metadata":{},"sourceType":"module"}