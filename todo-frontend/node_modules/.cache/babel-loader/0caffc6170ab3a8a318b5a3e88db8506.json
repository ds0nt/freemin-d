{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3007\"; // API Class  that contains helper methods with AJAX calls\n////////////////////////////////////////////////////////////////\n\nclass todoApi {\n  // the token for interactive with the API will be stored here.\n  static async request(endpoint) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"get\";\n    console.debug(\"API Call:\", endpoint, data, method); // token is passed in the header\n\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = {\n      Authorization: `Bearer ${todoApi.token}`\n    };\n    const params = method === \"get\" ? data : {};\n\n    try {\n      return (await axios({\n        url,\n        method,\n        data,\n        params,\n        headers\n      })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  } // Individual API routes\n  ///////////////////////////////////////////////////////////////////\n  // Get user details by username\n\n\n  static async getCurrentUser(username) {\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  } // Get token for login from username, password.\n\n\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, \"post\");\n    return res.token;\n  } // Signup for site.\n\n\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, \"post\");\n    return res.token;\n  } // Create a new habit\n\n\n  static async createHabit(data) {\n    let res = await this.request(`todos/${data.username}`, data, \"post\");\n    return res.habit;\n  } // Update an id-habit\n\n\n  static async getHabit(id, username) {\n    let res = await this.request(`todos/${username}/${id}`);\n    return res.habit;\n  } // Update an id-habit\n\n\n  static async updateHabit(id, username, data) {\n    let res = await this.request(`todos/${username}/${id}`, data, \"patch\");\n    return res.habit;\n  } // Checked an id-habit\n\n\n  static async checkHabit(id, username, data) {\n    console.log(\"update id-habit in API, id =\", id, \"username=\", username, \"data=\", data);\n    let res = await this.request(`todos/${username}/${id}/checked`, data, \"patch\");\n    console.log(\"result after update in API\", res.habit);\n    return res.habit;\n  } // Delete a habit by id\n\n\n  static async removeHabit(id, username) {\n    await this.request(`todos/${username}/${id}`, {}, \"delete\");\n  }\n\n} // for debugging purposes, token is put (\"testuser\" / \"password\" on class)\n// todoApi.token = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3R1c2VyIiwia\" + \n//     \"XNBZG1pbiI6ZmFsc2UsImlhdCI6MTY0OTk4MTM4OH0.Q-_tKzwP2dW1O0-wFJ3Az6CqdW_zUPax38jp-T2m5fw\"\n\n\nexport default todoApi;","map":{"version":3,"sources":["/Users/jaquelinecoelho/Desktop/good/habits-frontend/src/api/api.js"],"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","todoApi","request","endpoint","data","method","console","debug","url","headers","Authorization","token","params","err","error","response","message","Array","isArray","getCurrentUser","username","res","user","login","signup","createHabit","habit","getHabit","id","updateHabit","checkHabit","log","removeHabit"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,IAAkC,uBAAnD,C,CAEA;AACA;;AAEA,MAAMC,OAAN,CAAc;AACZ;AAGoB,eAAPC,OAAO,CAACC,QAAD,EAAsC;AAAA,QAA3BC,IAA2B,uEAApB,EAAoB;AAAA,QAAhBC,MAAgB,uEAAP,KAAO;AACxDC,IAAAA,OAAO,CAACC,KAAR,CAAc,WAAd,EAA2BJ,QAA3B,EAAqCC,IAArC,EAA2CC,MAA3C,EADwD,CAGxD;;AACA,UAAMG,GAAG,GAAI,GAAEX,QAAS,IAAGM,QAAS,EAApC;AACA,UAAMM,OAAO,GAAG;AAAEC,MAAAA,aAAa,EAAG,UAAST,OAAO,CAACU,KAAM;AAAzC,KAAhB;AACA,UAAMC,MAAM,GAAIP,MAAM,KAAK,KAAZ,GACTD,IADS,GAET,EAFN;;AAIA,QAAI;AACF,aAAO,CAAC,MAAMR,KAAK,CAAC;AAAEY,QAAAA,GAAF;AAAOH,QAAAA,MAAP;AAAeD,QAAAA,IAAf;AAAqBQ,QAAAA,MAArB;AAA6BH,QAAAA;AAA7B,OAAD,CAAZ,EAAsDL,IAA7D;AACD,KAFD,CAEE,OAAOS,GAAP,EAAY;AACZP,MAAAA,OAAO,CAACQ,KAAR,CAAc,YAAd,EAA4BD,GAAG,CAACE,QAAhC;AACA,UAAIC,OAAO,GAAGH,GAAG,CAACE,QAAJ,CAAaX,IAAb,CAAkBU,KAAlB,CAAwBE,OAAtC;AACA,YAAMC,KAAK,CAACC,OAAN,CAAcF,OAAd,IAAyBA,OAAzB,GAAmC,CAACA,OAAD,CAAzC;AACD;AACF,GArBW,CAuBZ;AACA;AAEA;;;AAC2B,eAAdG,cAAc,CAACC,QAAD,EAAW;AACpC,QAAIC,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,SAAQkB,QAAS,EAA/B,CAAhB;AACA,WAAOC,GAAG,CAACC,IAAX;AACD,GA9BW,CAgCZ;;;AACkB,eAALC,KAAK,CAACnB,IAAD,EAAO;AACvB,QAAIiB,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,YAAd,EAA2BE,IAA3B,EAAiC,MAAjC,CAAhB;AACA,WAAOiB,GAAG,CAACV,KAAX;AACD,GApCW,CAsCZ;;;AACmB,eAANa,MAAM,CAACpB,IAAD,EAAO;AACxB,QAAIiB,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,eAAd,EAA8BE,IAA9B,EAAoC,MAApC,CAAhB;AACA,WAAOiB,GAAG,CAACV,KAAX;AACD,GA1CW,CA4CZ;;;AACwB,eAAXc,WAAW,CAACrB,IAAD,EAAO;AAC7B,QAAIiB,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,SAAQE,IAAI,CAACgB,QAAS,EAApC,EAAuChB,IAAvC,EAA6C,MAA7C,CAAhB;AACA,WAAOiB,GAAG,CAACK,KAAX;AACD,GAhDW,CAkDZ;;;AACqB,eAARC,QAAQ,CAACC,EAAD,EAAKR,QAAL,EAAe;AAClC,QAAIC,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,SAAQkB,QAAS,IAAGQ,EAAG,EAArC,CAAhB;AACA,WAAOP,GAAG,CAACK,KAAX;AACD,GAtDW,CAwDZ;;;AACwB,eAAXG,WAAW,CAACD,EAAD,EAAKR,QAAL,EAAehB,IAAf,EAAqB;AAC3C,QAAIiB,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,SAAQkB,QAAS,IAAGQ,EAAG,EAArC,EAAwCxB,IAAxC,EAA8C,OAA9C,CAAhB;AACA,WAAOiB,GAAG,CAACK,KAAX;AACD,GA5DW,CA8DZ;;;AACuB,eAAVI,UAAU,CAACF,EAAD,EAAKR,QAAL,EAAehB,IAAf,EAAqB;AAC1CE,IAAAA,OAAO,CAACyB,GAAR,CAAY,8BAAZ,EAA4CH,EAA5C,EAAiD,WAAjD,EAA8DR,QAA9D,EAAwE,OAAxE,EAAiFhB,IAAjF;AACA,QAAIiB,GAAG,GAAG,MAAM,KAAKnB,OAAL,CAAc,SAAQkB,QAAS,IAAGQ,EAAG,UAArC,EAAgDxB,IAAhD,EAAsD,OAAtD,CAAhB;AACAE,IAAAA,OAAO,CAACyB,GAAR,CAAY,4BAAZ,EAA0CV,GAAG,CAACK,KAA9C;AACA,WAAOL,GAAG,CAACK,KAAX;AACD,GApEW,CAsEZ;;;AACwB,eAAXM,WAAW,CAACJ,EAAD,EAAKR,QAAL,EAAe;AACrC,UAAM,KAAKlB,OAAL,CAAc,SAAQkB,QAAS,IAAGQ,EAAG,EAArC,EAAwC,EAAxC,EAA4C,QAA5C,CAAN;AACD;;AAzEW,C,CA6Ed;AACA;AACA;;;AAGA,eAAe3B,OAAf","sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3007\";\n\n// API Class  that contains helper methods with AJAX calls\n////////////////////////////////////////////////////////////////\n\nclass todoApi {\n  // the token for interactive with the API will be stored here.\n  static token;\n\n  static async request(endpoint, data = {}, method = \"get\") {\n    console.debug(\"API Call:\", endpoint, data, method);\n\n    // token is passed in the header\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = { Authorization: `Bearer ${todoApi.token}` };\n    const params = (method === \"get\")\n        ? data\n        : {};\n\n    try {\n      return (await axios({ url, method, data, params, headers })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  // Individual API routes\n  ///////////////////////////////////////////////////////////////////\n  \n  // Get user details by username\n  static async getCurrentUser(username) {\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  }\n\n  // Get token for login from username, password.\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, \"post\");\n    return res.token;\n  }\n\n  // Signup for site.\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, \"post\");\n    return res.token;\n  }\n\n  // Create a new habit\n  static async createHabit(data) {\n    let res = await this.request(`todos/${data.username}`, data, \"post\");\n    return res.habit;\n  }\n\n  // Update an id-habit\n  static async getHabit(id, username) {\n    let res = await this.request(`todos/${username}/${id}`);\n    return res.habit;\n  }\n\n  // Update an id-habit\n  static async updateHabit(id, username, data) {\n    let res = await this.request(`todos/${username}/${id}`, data, \"patch\");\n    return res.habit;\n  }\n\n  // Checked an id-habit\n  static async checkHabit(id, username, data) {\n    console.log(\"update id-habit in API, id =\", id , \"username=\", username, \"data=\", data);\n    let res = await this.request(`todos/${username}/${id}/checked`, data, \"patch\");\n    console.log(\"result after update in API\", res.habit);\n    return res.habit;\n  }\n\n  // Delete a habit by id\n  static async removeHabit(id, username) {\n    await this.request(`todos/${username}/${id}`, {}, \"delete\");\n  }\n\n}\n\n// for debugging purposes, token is put (\"testuser\" / \"password\" on class)\n// todoApi.token = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3R1c2VyIiwia\" + \n//     \"XNBZG1pbiI6ZmFsc2UsImlhdCI6MTY0OTk4MTM4OH0.Q-_tKzwP2dW1O0-wFJ3Az6CqdW_zUPax38jp-T2m5fw\"\n\n\nexport default todoApi;"]},"metadata":{},"sourceType":"module"}